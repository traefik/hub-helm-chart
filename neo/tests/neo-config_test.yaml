suite: Neo deployment 
templates:
  - deployment.yaml
tests:
  - it: should have 1 replicas 
    asserts:
      - equal: 
          path: spec.replicas
          value: 1 
  - it: should change image when image.tag is specified
    set:
      image:
        tag:
          alpha2.0
    asserts:
      - equal:
          path: spec.template.spec.containers[0].image
          value: gcr.io/traefiklabs/neo-agent:alpha2.0
  - it: should change the pullPolicy if specified
    set:
      image:
        pullPolicy:
          Always 
    asserts:
      - equal:
          path: spec.template.spec.containers[0].imagePullPolicy
          value: Always 
  - it: should have an image when image.name is specified
    set:
      image:
        name: gcr.io/traefiklabs/neo-agent
    asserts:
      - equal:
          path: spec.template.spec.containers[0].image
          value: gcr.io/traefiklabs/neo-agent:latest
  - it: should have annotations and/or  podsAnnotations when specified
    set:
      deployment:
        annotations:
          neo/plop: annotations
        podAnnotations:  
          neo/plop: podAnnotations
    asserts:
      - equal:
          path: metadata.annotations.neo/plop 
          value: annotations 
      - equal:
          path: spec.template.metadata.annotations.neo/plop 
          value: podAnnotations 
  - it: should have specific label when specified
    set:
      deployment:
        podLabels:
          custom-label: plop
    asserts:
      - equal:
          path: spec.template.metadata.labels.custom-label
          value: plop

